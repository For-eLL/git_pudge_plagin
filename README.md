# OneTouchGit — быстрый git-коммит и push из VS Code

Коротко: простой VS Code плагин, который выполняет `git add .`, `git commit` и `git push` одной командой.

**Основные функции**

- **`oneTouchGit()`**: главный рабочий метод — предлагает выбрать режим (Автокоммит / Ручной коммит), формирует сообщение (или запрашивает у пользователя), выполняет `git add .`, `git commit -m "..."` и `git push`, и показывает уведомления об успехе/ошибке.
- **`runGit(args, cwd)`**: вспомогательная функция-обёртка вокруг `child_process.exec` для выполнения git-команд в рабочей папке.
- **`activate(context)`**: регистрирует команду `onetouchgit.run` в VS Code.
- **`deactivate()`**: заглушка деактивации расширения.

**Требования**

- **Git**: установлен и доступен в PATH.
- **Открытая папка в VS Code**: плагин работает в контексте открытого workspace (папки с git-репозиторием).
- **Версия VS Code**: согласно `package.json` — `^1.80.0`.

**Установка (локально для разработки)**

1. Откройте эту папку как проект в VS Code.
2. Нажмите `F5` чтобы запустить экземпляр Extension Development Host и протестировать команду.

Примечание: для упаковки и установки как полноценное расширение используйте `vsce` (не обязателен для локальной разработки):

```
npm install -g vsce
vsce package
```

После упаковки установите `.vsix` файл через `Extensions: Install from VSIX`.

**Как пользоваться**

- Откройте папку с git-репозиторием в VS Code.
- Вызовите Командную палитру (`Cmd+Shift+P`) и выполните: `One-Touch Git: add + commit + push`, или используйте горячую клавишу `Cmd+Alt+G`
- Выберите режим:
	- `Автокоммит` — создаёт сообщение вида `auto: update (DATE)` и выполняет add/commit/push без лишних диалогов.
	- `Ручной коммит` — откроется поле ввода для сообщения коммита.

Поведение:

- В плагине сообщение коммита очищается от двойных кавычек (двойные кавычки заменяются на одинарные), чтобы безопасно подставляться в командную строку.
- В случае ошибок при выполнении git-команд плагин покажет ошибку через `vscode.window.showErrorMessage`.

**Команды**

- **`onetouchgit.run`**: выполни `git add .`, `git commit` и `git push`.
- Горячая клавиша (по умолчанию): `Cmd+Alt+G` (см. `package.json`)

**Отладка и рекомендации**

- Если ничего не происходит — убедитесь, что папка с проектом открыта, и в ней инициализирован git (`git status` работает в терминале).
- Если команда `git push` требует ввода пароля или 2FA — откройте терминал и выполните `git push` вручную, настроив аутентификацию (SSH-ключи или токены).
- Для подробного логирования можно временно изменить `runGit` чтобы логировать `stdout`/`stderr` при выполнении команд.

